<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <style>
    body {
      margin: 0; padding: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #4facfe, #00f2fe);
    }
    .container {
      width: 95%; max-width: 600px;
      margin: 20px auto; background: #fff;
      padding: 20px; border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    h2, h3 { text-align: center; }
    label { display: block; margin: 8px 0 4px; font-weight: bold; }
    input, select, button {
      width: 100%; padding: 12px; margin-bottom: 12px;
      border-radius: 8px; border: 1px solid #ccc;
      font-size: 1em; box-sizing: border-box; height: 45px;
    }
    button { border: none; cursor: pointer; color: #fff; }
    .btn-primary { background: #007bff; }
    .btn-success { background: #28a745; }
    .btn-danger { background: #dc3545; }
    .btn-secondary { background: #6c757d; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    table td, table th {
      border: 1px solid #ddd; padding: 8px; text-align: center;
    }
    table th { background-color: #f2f2f2; }
    #billOutput {
      margin-top: 20px; font-weight: bold; font-size: 1.1em;
      background: #f8f9fa; padding: 15px; border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
<div style="display:flex; align-items:center; justify-content:space-between;">
  <h2 id="headerTitle" style="margin:0;"></h2>
  <button id="settingsBtn" style="margin-left:10px;">‚öôÔ∏è</button>
</div>

<!-- Overlay -->
<div id="settingsOverlay" 
     style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
            background:rgba(0,0,0,0.3); backdrop-filter:blur(5px); z-index:1000;">
</div>

<!-- Popup Box -->
<div id="settingsPopup" 
     style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
            background:#fff; border-radius:10px; padding:20px; width:300px;
            box-shadow:0 4px 12px rgba(0,0,0,0.3); z-index:1001; text-align:center;">
  
  <h3 style="margin-top:0; font-size:20px; color:#333;">‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§ú</h3>
  
  <label style="display:block; margin:10px 0;">
    ‡§®‡§æ‡§µ: <input type="text" id="userNameInput" 
                style="width:90%; padding:8px; border:1px solid #ccc; border-radius:5px;">
  </label>
  
  <label style="display:block; margin:10px 0;">
    ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞: <input type="text" id="mobileInput" 
                style="width:90%; padding:8px; border:1px solid #ccc; border-radius:5px;">
  </label>
  
  <button id="saveSettings" 
          style="background:#28a745; color:#fff; padding:8px 12px; margin:8px 4px;
                 border:none; border-radius:5px; cursor:pointer;">
    Save
  </button>
  
  <button id="closeSettings" 
          style="background:#dc3545; color:#fff; padding:8px 12px; margin:8px 4px;
                 border:none; border-radius:5px; cursor:pointer;">
    Close
  </button>
</div>
    <!-- ‡§´‡•â‡§∞‡•ç‡§Æ -->
    <form id="dutyForm">
      <label for="dutyDate">‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ</label>
      <input type="date" id="dutyDate" required>

      <label for="dutyLocation">‡§†‡§ø‡§ï‡§æ‡§£</label>
      <input type="text" id="dutyLocation" placeholder="‡§†‡§ø‡§ï‡§æ‡§£ ‡§≤‡§ø‡§π‡§æ" required>

      <label for="dutyType">‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</label>
      <select id="dutyType" required>
        <option value="full">‡§´‡•Å‡§≤ ‡§°‡•á</option>
        <option value="half">‡§π‡§æ‡§´ ‡§°‡•á</option>
      </select>

      <button type="submit" class="btn-primary">‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§®‡•ã‡§Ç‡§¶‡§µ‡§æ</button>
      <button type="reset" class="btn-secondary">‡§∏‡§æ‡§´ ‡§ï‡§∞‡§æ</button>
    </form>

    <!-- ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡•ç‡§∏ -->
    <h3 class="mt-4">üìã ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡•ç‡§∏</h3>
    <table id="recordsTable">
      <thead>
        <tr>
          <th>‡§§‡§æ‡§∞‡•Ä‡§ñ</th>
          <th>‡§†‡§ø‡§ï‡§æ‡§£</th>
          <th>‡§´‡•Å‡§≤ ‡§°‡•á</th>
          <th>‡§π‡§æ‡§´ ‡§°‡•á</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- ‡§¨‡§ü‡§£‡§Ç -->
    <div class="mt-4 text-center">
      
      <button class="btn-success" id="generateBill">üíµ ‡§¨‡§ø‡§≤ ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ</button>
    
           
   <button id="sendWhatsApp" class="btn-success">üì≤ WhatsApp ‡§µ‡§∞ ‡§™‡§æ‡§†‡§µ‡§æ</button>
  
    
    </div>
   
    <!-- ‡§®‡§µ‡•Ä‡§®: ‡§è‡§ï ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§æ‡§¢‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä -->
    <div class="mt-4 text-center">
      <label for="deleteDate">‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§®‡§ø‡§µ‡§°‡§æ (‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§æ‡§¢‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä)</label>
      <input type="date" id="deleteDate">
      <button class="btn-danger" id="deleteOne">‡§è‡§ï ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° Delete ‡§ï‡§∞‡§æ</button>
    </div>
 
     <!-- WhatsApp ‡§¨‡§ü‡§£ -->
    <div class="mt-4 text-center">
      <button class="btn-danger" id="deleteAll">‡§∏‡§∞‡•ç‡§µ ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° Delete ‡§ï‡§∞‡§æ </button>
    </div>

    <!-- ‡§¨‡§ø‡§≤ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü -->
    <div id="billOutput"></div>

   
  </div>
</body>
</html>

<script>
  const form = document.getElementById('dutyForm');
const tableBody = document.querySelector('#recordsTable tbody');
const deleteAllBtn = document.getElementById('deleteAll');
const deleteOneBtn = document.getElementById('deleteOne');
const generateBillBtn = document.getElementById('generateBill');
const billOutput = document.getElementById('billOutput');

// ‡§®‡§µ‡•Ä‡§® ‡§¨‡§ü‡§£


function formatDate(dateStr) {
  const d = new Date(dateStr);
  const day = String(d.getDate()).padStart(2, '0');
  const month = String(d.getMonth() + 1).padStart(2, '0');
  const year = String(d.getFullYear()).slice(-2);
  return `${day}/${month}/${year}`;
}

function saveData() {
  const rows = Array.from(tableBody.rows).map(row => ({
    date: row.cells[0].innerText,
    location: row.cells[1].innerText,
    full: row.cells[2].innerText,
    half: row.cells[3].innerText
  }));
  localStorage.setItem("dutyRecords", JSON.stringify(rows));
}

function loadData() {
  const data = JSON.parse(localStorage.getItem("dutyRecords") || "[]");
  tableBody.innerHTML = "";
  data.forEach(record => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${record.date}</td>
      <td>${record.location}</td>
      <td>${record.full}</td>
      <td>${record.half}</td>
    `;
    tableBody.appendChild(row);
  });
}

form.addEventListener('submit', function(e) {
  e.preventDefault();
  const date = document.getElementById('dutyDate').value;
  const location = document.getElementById('dutyLocation').value.trim();
  const type = document.getElementById('dutyType').value;

  if (!location) {
    alert("‡§†‡§ø‡§ï‡§æ‡§£ ‡§∞‡§ø‡§ï‡§æ‡§Æ‡•á ‡§†‡•á‡§µ‡•Ç ‡§®‡§ï‡§æ. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§†‡§ø‡§ï‡§æ‡§£ ‡§≤‡§ø‡§π‡§æ.");
    return;
  }

  const formattedDate = formatDate(date);
  let existingRow = Array.from(tableBody.rows).find(row => 
    row.cells[0].innerText === formattedDate && row.cells[1].innerText === location
  );

  if (existingRow) {
    if (type === 'full') {
      existingRow.cells[2].innerText = parseInt(existingRow.cells[2].innerText || 0) + 1;
      existingRow.cells[3].innerText = "";
    } else {
      existingRow.cells[3].innerText = parseInt(existingRow.cells[3].innerText || 0) + 1;
      existingRow.cells[2].innerText = "";
    }
  } else {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${formattedDate}</td>
      <td>${location}</td>
      <td>${type === 'full' ? 1 : ""}</td>
      <td>${type === 'half' ? 1 : ""}</td>
    `;
    tableBody.appendChild(row);
  }

  saveData();
  form.reset();
});

deleteAllBtn.addEventListener('click', function() {
  if (confirm('‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ñ‡§æ‡§§‡•ç‡§∞‡•Ä ‡§Ü‡§π‡•á ‡§ï‡§æ? ‡§∏‡§∞‡•ç‡§µ ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡•ç‡§∏ ‡§ï‡§æ‡§¢‡•Ç‡§® ‡§ü‡§æ‡§ï‡§≤‡•á ‡§ú‡§æ‡§§‡•Ä‡§≤.')) {
    tableBody.innerHTML = '';
    billOutput.innerHTML = '';
    localStorage.removeItem("dutyRecords");
  }
});

deleteOneBtn.addEventListener('click', function() {
  const dateVal = document.getElementById('deleteDate').value;
  if (!dateVal) {
    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§®‡§ø‡§µ‡§°‡§æ.");
    return;
  }
  const formattedDate = formatDate(dateVal);
  let rowToDelete = Array.from(tableBody.rows).find(row => row.cells[0].innerText === formattedDate);
  if (rowToDelete) {
    tableBody.removeChild(rowToDelete);
    saveData();
    alert("‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§æ‡§¢‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Ü‡§≤‡§æ.");
  } else {
    alert("‡§§‡•ç‡§Ø‡§æ ‡§§‡§æ‡§∞‡§ñ‡•á‡§ö‡§æ ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§∏‡§æ‡§™‡§°‡§≤‡§æ ‡§®‡§æ‡§π‡•Ä.");
  }
});

generateBillBtn.addEventListener('click', function() {
  let fullCount = 0;
  let halfCount = 0;

  Array.from(tableBody.rows).forEach(row => {
    const f = parseInt(row.cells[2].innerText) || 0;
    const h = parseInt(row.cells[3].innerText) || 0;
    fullCount += f;
    halfCount += h;
  });

  const fullSubtotal = fullCount * 800;
  const halfSubtotal = halfCount * 500;
  const total = fullSubtotal + halfSubtotal;

  billOutput.innerHTML = `
  <div style="
    background: #fefefe;
    border: 2px solid #4CAF50;
    border-radius: 12px;
    padding: 16px;
    font-family: 'Segoe UI', sans-serif;
    color: #333;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    max-width: 320px;
    line-height: 1.6;
  ">
    <div style="text-align:center; margin-bottom:10px;">
      üíµ <strong style="color:#2E8B57; font-size:20px;">‡§¨‡§ø‡§≤</strong>
    </div>
    <div style="margin-bottom:8px; color:#555;">
      ‡§π‡§æ‡§´ ‡§°‡•á = ${halfCount}<br>
      ${halfCount} √ó 500 = <strong style="color:#000;">Rs.${halfSubtotal}</strong>
    </div>
    <div style="margin-bottom:8px; color:#555;">
      ‡§´‡•Å‡§≤ ‡§°‡•á = ${fullCount}<br>
      ${fullCount} √ó 800 = <strong style="color:#000;">Rs.${fullSubtotal}</strong>
    </div>
    <div style="text-align:right; margin-top:12px;">
      <strong style="color:#d32f2f; font-size:18px;">‡§è‡§ï‡•Ç‡§£ = Rs.${total}</strong>
    </div>
  </div>
`;
});

// WhatsApp ‡§µ‡§∞ ‡§™‡§æ‡§†‡§µ‡§£‡•á
// HTML ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§Ö‡§∏‡§≤‡•á‡§≤‡•á ‡§¨‡§ü‡§£: <button id="sendWhatsApp" class="btn-success">üì≤ WhatsApp ‡§µ‡§∞ ‡§™‡§æ‡§†‡§µ‡§æ</button>

const sendWhatsAppBtn = document.getElementById("sendWhatsApp");

sendWhatsAppBtn.addEventListener("click", function() {
  
  const savedName = localStorage.getItem("userName");
  const savedMobile = localStorage.getItem("mobileNumber");
  
  // ‡§π‡§æ‡§∞‡•ç‡§°‡§ï‡•ã‡§°‡•á‡§° ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§ï‡•ã‡§°‡§∏‡§π)
  const fullNumber = savedMobile;  // <-- ‡§á‡§•‡•á ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡•ç‡§Ø‡§æ

  // ‡§®‡§æ‡§µ compulsory ‡§ï‡§∞‡§æ
  let userName = savedName;
  

  let message = `üìã ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡•ç‡§∏ (${userName}):\n`;
  let dutyCount = 0;

  Array.from(tableBody.rows).forEach(row => {
    let dutyType = "";
    if (row.cells[2].innerText) {
      dutyType = "‡§´‡•Å‡§≤ ‡§°‡•á";
      dutyCount += parseInt(row.cells[2].innerText) || 0;
    } else if (row.cells[3].innerText) {
      dutyType = "‡§π‡§æ‡§´ ‡§°‡•á";
      dutyCount += parseInt(row.cells[3].innerText) || 0;
    }
    message += `${row.cells[0].innerText}  ${row.cells[1].innerText}  ${dutyType}\n`;
  });

  // ‡§è‡§ï‡•Ç‡§£ ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä‡§ú ‡§¶‡§æ‡§ñ‡§µ‡§æ
  message += `\n‡§è‡§ï‡•Ç‡§£ ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä‡§ú: ${dutyCount}\n`;

  // ‡§¨‡§ø‡§≤ ‡§∂‡•á‡§µ‡§ü‡•Ä ‡§ú‡•ã‡§°‡§æ
  if (billOutput.innerText.trim() !== "") {
    message += "\n" + billOutput.innerText;
  }

  const url = `https://wa.me/${fullNumber}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
});


// Name mobile numbrr
const settingsBtn = document.getElementById("settingsBtn");
const settingsPopup = document.getElementById("settingsPopup");
const saveSettingsBtn = document.getElementById("saveSettings");
const closeSettingsBtn = document.getElementById("closeSettings");
const userNameInput = document.getElementById("userNameInput");
const mobileInput = document.getElementById("mobileInput");
const headerTitle = document.getElementById("headerTitle");

// ‚öôÔ∏è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡•á‡§≤‡•ç‡§Ø‡§æ‡§µ‡§∞ popup ‡§â‡§ò‡§°‡§æ
settingsBtn.addEventListener("click", function() {
  settingsPopup.style.display = "block";
});

// Close ‡§¨‡§ü‡§£
closeSettingsBtn.addEventListener("click", function() {
  settingsPopup.style.display = "none";
});

// Save ‡§¨‡§ü‡§£
saveSettingsBtn.addEventListener("click", function() {
  const name = userNameInput.value.trim();
  const mobile = mobileInput.value.trim();

  if (!name) {
    alert("‡§®‡§æ‡§µ ‡§ü‡§æ‡§ï‡§£‡•á ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.");
    return;
  }
  if (!/^\d{10}$/.test(mobile)) {
    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡•ã‡§ó‡•ç‡§Ø 10 ‡§Ö‡§Ç‡§ï‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡•ç‡§Ø‡§æ.");
    return;
  }

  localStorage.setItem("userName", name);
  localStorage.setItem("mobileNumber", "91" + mobile);

  headerTitle.innerText = `üç¥ ‡§ï‡•á‡§ü‡§∞‡§ø‡§Ç‡§ó ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§ü‡•ç‡§∞‡•Ö‡§ï‡§∞ - ${name}`;

  alert("‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§ú ‡§ú‡§§‡§® ‡§ù‡§æ‡§≤‡•ç‡§Ø‡§æ ‚úÖ");
  settingsPopup.style.display = "none";
});

// ‡§™‡•á‡§ú ‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•ç‡§Ø‡§æ‡§µ‡§∞ ‡§Ü‡§ß‡•Ä‡§ö‡•á values ‡§¶‡§æ‡§ñ‡§µ‡§æ
window.addEventListener("load", function() {
  const savedName = localStorage.getItem("userName");
  const savedMobile = localStorage.getItem("mobileNumber");

  if (savedName) {
    userNameInput.value = savedName;
    headerTitle.innerText = `üç¥ ‡§ï‡•á‡§ü‡§∞‡§ø‡§Ç‡§ó ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§ü‡•ç‡§∞‡•Ö‡§ï‡§∞ - ${savedName}`;
  }
  if (savedMobile) {
    mobileInput.value = savedMobile.slice(2); // 91 ‡§ï‡§æ‡§¢‡•Ç‡§® ‡§´‡§ï‡•ç‡§§ 10 ‡§Ö‡§Ç‡§ï ‡§¶‡§æ‡§ñ‡§µ‡§æ
  }
});

saveSettingsBtn.addEventListener("click", function() {
  const name = userNameInput.value.trim();
  const mobile = mobileInput.value.trim();

  if (!name) {
    alert("‡§®‡§æ‡§µ ‡§ü‡§æ‡§ï‡§£‡•á ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.");
    return;
  }
  if (!/^\d{10}$/.test(mobile)) {
    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡•ã‡§ó‡•ç‡§Ø 10 ‡§Ö‡§Ç‡§ï‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡•ç‡§Ø‡§æ.");
    return;
  }

  localStorage.setItem("userName", name);
  localStorage.setItem("mobileNumber", "91" + mobile);

  headerTitle.innerText = `üç¥ ‡§ï‡•á‡§ü‡§∞‡§ø‡§Ç‡§ó ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§ü‡•ç‡§∞‡•Ö‡§ï‡§∞ - ${name}`;

  alert("‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§ú ‡§ú‡§§‡§® ‡§ù‡§æ‡§≤‡•ç‡§Ø‡§æ ‚úÖ");

  // ‡§á‡§•‡•á overlay ‡§Ü‡§£‡§ø popup ‡§¶‡•ã‡§®‡•ç‡§π‡•Ä ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡§æ
  document.getElementById("settingsOverlay").style.display = "none";
  settingsPopup.style.display = "none";
});


settingsBtn.addEventListener("click", function() {
  document.getElementById("settingsOverlay").style.display = "block";
  document.getElementById("settingsPopup").style.display = "block";
});

closeSettings.addEventListener("click", function() {
  document.getElementById("settingsOverlay").style.display = "none";
  document.getElementById("settingsPopup").style.display = "none";
});
// Name mobile number 


window.onload = loadData;
                          </script>
