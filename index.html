<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  
   
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
  
  
  <style>
   .whatsapp-icon {
      position: absolute;
      top: 10px;            /* distance from top inside container */
      right: 10px;          /* distance from right inside container */
      font-size: 32px;      /* medium size */
      color: #25D366;       /* WhatsApp green */
      text-decoration: none;
    }

    .whatsapp-icon:hover {
      color: #20b858;
    }
    
    body {
      margin: 0; 
      padding: 0;
      overflow-x: hidden;   /* horizontal scroll ‡§¨‡§Ç‡§¶ */
      overscroll-behavior-x: none; /* drag ‡§ï‡§∞‡•Ç‡§® ‡§°‡§æ‡§µ‡•Ä‡§ï‡§°‡•á-‡§â‡§ú‡§µ‡•Ä‡§ï‡§°‡•á ‡§π‡§≤‡§£‡§æ‡§∞ ‡§®‡§æ‡§π‡•Ä */
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #4facfe, #00f2fe);
    }

    .container {
      width: 100%;          /* mobile ‡§µ‡§∞ full width */
      max-width: 600px;     /* ‡§Æ‡•ã‡§†‡•ç‡§Ø‡§æ screen ‡§µ‡§∞ limit */
      margin: 20px auto; 
      background: #fff;
      padding: 20px; 
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      box-sizing: border-box; /* padding width ‡§Æ‡§ß‡•ç‡§Ø‡•á count ‡§π‡•ã‡§à‡§≤ */
      overflow-x: hidden;   /* container ‡§Æ‡§ß‡•ç‡§Ø‡•á horizontal scroll ‡§¨‡§Ç‡§¶ */
    }

    h2, h3 { 
      text-align: center; 
    }

    label { 
      display: block; 
      margin: 8px 0 4px; 
      font-weight: bold; 
    }

    input, select, button {
      width: 100%; 
      padding: 12px; 
      margin-bottom: 12px;
      border-radius: 8px; 
      border: 1px solid #ccc;
      font-size: 1em; 
      box-sizing: border-box; 
      height: 45px;
    }

    button { 
      border: none; 
      cursor: pointer; 
      color: #fff; 
    }

    .btn-primary { background: #007bff; }
    .btn-success { background: #28a745; }
    .btn-danger { background: #dc3545; }
    .btn-secondary { background: #6c757d; }
    .btn-whatsapp { background: #25D366; }

    table { 
      width: 100%; 
      border-collapse: collapse; 
      margin-top: 15px; 
      table-layout: fixed; /* columns fix ‡§π‡•ã‡§§‡•Ä‡§≤ */
    }

    table td, table th {
      border: 1px solid #ddd; 
      padding: 8px; 
      text-align: center;
      word-wrap: break-word;   /* ‡§≤‡§æ‡§Ç‡§¨ ‡§∂‡§¨‡•ç‡§¶ wrap ‡§π‡•ã‡§§‡•Ä‡§≤ */
      white-space: normal;     /* text break ‡§π‡•ã‡§à‡§≤ */
      overflow: hidden;        
      text-overflow: ellipsis; 
    }

    /* Column widths */
    table th:nth-child(1), table td:nth-child(1) { width: 30%; }  /* ‡§§‡§æ‡§∞‡•Ä‡§ñ */
    table th:nth-child(2), table td:nth-child(2) { width: 40%; }  /* ‡§†‡§ø‡§ï‡§æ‡§£ */
    table th:nth-child(3), table td:nth-child(3) { width: 15%; }  /* ‡§´‡•Å‡§≤‡§°‡•á */
    table th:nth-child(4), table td:nth-child(4) { width: 15%; }  /* ‡§π‡§æ‡§´‡§°‡•á */

    table th { 
      background-color: #f2f2f2; 
    }

    #billOutput {
      margin-top: 20px; 
      font-weight: bold; 
      font-size: 1.1em;
      background: #f8f9fa; 
      padding: 15px; 
      border-radius: 8px;
    }
</style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="container">
    
<div style="display:flex; align-items:center; justify-content:center; gap:8px; 
            padding:10px; border-bottom:1px solid #ddd;">
  <h2 id="headerTitle" style="margin:0; font-size:20px; color:#333;"></h2>
  
     
    
  <h4 id="settingsBtn" class="whatsapp-icon" style="margin-left:8px; margin-top:10px">‚öôÔ∏è</h4>
  
</div>

<!-- Overlay -->
<div id="settingsOverlay" 
     style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
            background:rgba(0,0,0,0.3); backdrop-filter:blur(5px); z-index:1000;">
</div>

<!-- Popup Box -->
<div id="settingsPopup" 
     style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
            background:#fff; border-radius:10px; padding:20px; width:300px;
            box-shadow:0 4px 12px rgba(0,0,0,0.3); z-index:1001; text-align:center;">
  
  <h3 style="margin-top:0; font-size:20px; color:#333;">‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§ú</h3>
  
  <label style="display:block; margin:10px 0;">
    ‡§®‡§æ‡§µ: <input type="text" id="userNameInput" 
                style="width:90%; padding:8px; border:1px solid #ccc; border-radius:5px;">
  </label>
  
  <label style="display:block; margin:10px 0;">
    ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞: <input type="text" id="mobileInput" 
                style="width:90%; padding:8px; border:1px solid #ccc; border-radius:5px;">
  </label>
  
  <button id="saveSettings" 
          style="background:#28a745; color:#fff; padding:8px 12px; margin:8px 4px;
                 border:none; border-radius:5px; cursor:pointer;">
    Save
  </button>
  
  <button id="closeSettings" 
          style="background:#dc3545; color:#fff; padding:8px 12px; margin:8px 4px;
                 border:none; border-radius:5px; cursor:pointer;">
    Close
  </button>
</div>
    <!-- ‡§´‡•â‡§∞‡•ç‡§Æ -->
    <form id="dutyForm">
      <label for="dutyDate">‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ</label>
      <input type="date" id="dutyDate" required>

      <label for="dutyLocation">‡§†‡§ø‡§ï‡§æ‡§£</label>
      <input type="text" id="dutyLocation" placeholder="‡§†‡§ø‡§ï‡§æ‡§£ ‡§≤‡§ø‡§π‡§æ" required>

      <label for="dutyType">‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</label>
      <select id="dutyType" required>
         <option value="half">‡§π‡§æ‡§´ ‡§°‡•á</option>
        <option value="full">‡§´‡•Å‡§≤ ‡§°‡•á</option>
        </select>

      <button type="submit" class="btn-primary">Save</button>
      <button type="reset" class="btn-secondary">Clear</button>
    </form>

    <!-- ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡•ç‡§∏ -->
    <h3 class="mt-4">üìã ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡•ç‡§∏</h3>
    <table id="recordsTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Location</th>
          <th>Full Day</th>
          <th>Half Day</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- ‡§¨‡§ü‡§£‡§Ç -->
    <div class="mt-4 text-center">
      
      <button class="btn-success" id="generateBill">üíµ ‡§¨‡§ø‡§≤ ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ</button>
    
           
   
  
 
   
    <!-- ‡§®‡§µ‡•Ä‡§®: ‡§è‡§ï ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§æ‡§¢‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä -->
    <div class="mt-4 text-center">
      <label for="deleteDate">‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§®‡§ø‡§µ‡§°‡§æ (‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§æ‡§¢‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä)</label>
      <input type="date" id="deleteDate">
      <button class="btn-danger" id="deleteOne">‡§è‡§ï ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° Delete ‡§ï‡§∞‡§æ</button>
    </div>
 
     <!-- WhatsApp ‡§¨‡§ü‡§£ -->
    <div class="mt-4 text-center">
      <button class="btn-danger" id="deleteAll">‡§∏‡§∞‡•ç‡§µ ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° Delete ‡§ï‡§∞‡§æ </button>
    </div>

    <!-- ‡§¨‡§ø‡§≤ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü -->
    <div id="billOutput"></div>

   
  </div>
</body>
</html>

<script>
  const form = document.getElementById('dutyForm');
const tableBody = document.querySelector('#recordsTable tbody');
const deleteAllBtn = document.getElementById('deleteAll');
const deleteOneBtn = document.getElementById('deleteOne');
const generateBillBtn = document.getElementById('generateBill');
const billOutput = document.getElementById('billOutput');

// ‡§®‡§µ‡•Ä‡§® ‡§¨‡§ü‡§£

// dummy
function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      const savedName = localStorage.getItem("userName");
  const savedMobile = localStorage.getItem("mobileNumber");

const pageWidth = doc.internal.pageSize.getWidth();

// Center the text by subtracting half of its width
doc.text(savedName, pageWidth / 2, 15, { align: "center" });


      
      
    //  doc.autoTable({ html: '#recordsTable'//, startY: 20 });
      
      // Add the table below the title
doc.autoTable({ html: '#recordsTable', startY: 25 });




// only for billll

// only for bill printing 



      doc.save("billll.pdf");
    }
// dummy




function formatDate(dateStr) {
  const d = new Date(dateStr);
  const day = String(d.getDate()).padStart(2, '0');
  const month = String(d.getMonth() + 1).padStart(2, '0');
  const year = String(d.getFullYear()).slice(-2);
  return `${day}/${month}/${year}`;
}

function saveData() {
  const rows = Array.from(tableBody.rows).map(row => ({
    date: row.cells[0].innerText,
    location: row.cells[1].innerText,
    full: row.cells[2].innerText,
    half: row.cells[3].innerText
  }));
  localStorage.setItem("dutyRecords", JSON.stringify(rows));
}

function loadData() {
  const data = JSON.parse(localStorage.getItem("dutyRecords") || "[]");
  tableBody.innerHTML = "";
  data.forEach(record => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${record.date}</td>
      <td>${record.location}</td>
      <td>${record.full}</td>
      <td>${record.half}</td>
    `;
    tableBody.appendChild(row);
  });
}

form.addEventListener('submit', function(e) {
  e.preventDefault();
  const date = document.getElementById('dutyDate').value;
  const location = document.getElementById('dutyLocation').value.trim();
  const type = document.getElementById('dutyType').value;

  if (!location) {
    alert("‡§†‡§ø‡§ï‡§æ‡§£ ‡§∞‡§ø‡§ï‡§æ‡§Æ‡•á ‡§†‡•á‡§µ‡•Ç ‡§®‡§ï‡§æ. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§†‡§ø‡§ï‡§æ‡§£ ‡§≤‡§ø‡§π‡§æ.");
    return;
  }

  const formattedDate = formatDate(date);
  let existingRow = Array.from(tableBody.rows).find(row => 
    row.cells[0].innerText === formattedDate && row.cells[1].innerText === location
  );

  if (existingRow) {
    if (type === 'full') {
      existingRow.cells[2].innerText = parseInt(existingRow.cells[2].innerText || 0) + 1;
      existingRow.cells[3].innerText = "";
    } else {
      existingRow.cells[3].innerText = parseInt(existingRow.cells[3].innerText || 0) + 1;
      existingRow.cells[2].innerText = "";
    }
  } else {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${formattedDate}</td>
      <td>${location}</td>
      <td>${type === 'full' ? 1 : ""}</td>
      <td>${type === 'half' ? 1 : ""}</td>
    `;
    tableBody.appendChild(row);
  }

  saveData();
  form.reset();
});

deleteAllBtn.addEventListener('click', function() {
  if (confirm('‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ñ‡§æ‡§§‡•ç‡§∞‡•Ä ‡§Ü‡§π‡•á ‡§ï‡§æ? ‡§∏‡§∞‡•ç‡§µ ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡•ç‡§∏ ‡§ï‡§æ‡§¢‡•Ç‡§® ‡§ü‡§æ‡§ï‡§≤‡•á ‡§ú‡§æ‡§§‡•Ä‡§≤.')) {
    tableBody.innerHTML = '';
    billOutput.innerHTML = '';
    localStorage.removeItem("dutyRecords");
  }
});

deleteOneBtn.addEventListener('click', function() {
  const dateVal = document.getElementById('deleteDate').value;
  if (!dateVal) {
    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§®‡§ø‡§µ‡§°‡§æ.");
    return;
  }
  const formattedDate = formatDate(dateVal);
  let rowToDelete = Array.from(tableBody.rows).find(row => row.cells[0].innerText === formattedDate);
  if (rowToDelete) {
    tableBody.removeChild(rowToDelete);
    saveData();
    alert("‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§æ‡§¢‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Ü‡§≤‡§æ.");
  } else {
    alert("‡§§‡•ç‡§Ø‡§æ ‡§§‡§æ‡§∞‡§ñ‡•á‡§ö‡§æ ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§° ‡§∏‡§æ‡§™‡§°‡§≤‡§æ ‡§®‡§æ‡§π‡•Ä.");
  }
});

generateBillBtn.addEventListener('click', function() {
  let fullCount = 0;
  let halfCount = 0;

  // Loop through table rows
  Array.from(tableBody.rows).forEach(row => {
    const f = parseInt(row.cells[2].innerText) || 0; // Full day count
    const h = parseInt(row.cells[3].innerText) || 0; // Half day count
    fullCount += f;
    halfCount += h;
  });

  // Calculate subtotals
  const fullSubtotal = fullCount * 800;
  const halfSubtotal = halfCount * 500;
  const total = fullSubtotal + halfSubtotal;

  // Show summary on screen
  billOutput.innerHTML = `
    <div style="background:#fefefe; border:2px solid #4CAF50; border-radius:12px; padding:16px; font-family:'Segoe UI', sans-serif; max-width:400px; margin:auto;">
      <div style="text-align:center; margin-bottom:10px;">
        üíµ <strong style="color:#2E8B57; font-size:20px;">Bill Summary</strong>
      </div>
      <div style="margin-bottom:8px;">Half Day: ${halfCount} = ${halfCount} √ó 500 = Rs.${halfSubtotal}</div>
      <div style="margin-bottom:8px;">Full Day: ${fullCount} = ${fullCount} √ó 800 = Rs.${fullSubtotal}</div>
      <div style="text-align:right; margin-top:12px;">
        <strong style="color:#d32f2f; font-size:18px;">Grand Total = Rs.${total}</strong>
      </div>
      <div style="text-align:center; margin-top:15px;">
       <button onclick="downloadPDF()" 
        style="padding:10px 20px; background:#4CAF50; color:white; border:none; border-radius:5px; cursor:pointer;">
  Download Bill PDF
</button>
      </div>
    </div>
  `;

  // Attach event to download button
  document.getElementById('downloadBtn').addEventListener('click', function() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const pageWidth = doc.internal.pageSize.getWidth();

    // Title
    doc.setFontSize(18);
    doc.setTextColor(46, 139, 87);
    doc.text("üíµ Bill Summary", pageWidth / 2, 20, { align: "center" });

    // Divider line
    doc.setDrawColor(0);
    doc.setLineWidth(0.5);
    doc.line(20, 25, pageWidth - 20, 25);

    // Content
    doc.setFontSize(14);
    doc.setTextColor(50, 50, 50);
    let y = 40;

    doc.text(`Half Day: ${halfCount} = ${halfCount} √ó 500 = Rs.${halfSubtotal}`, 20, y);
    y += 12;
    doc.text(`Full Day: ${fullCount} = ${fullCount} √ó 800 = Rs.${fullSubtotal}`, 20, y);
    y += 12;

    // Grand Total highlighted
    doc.setFontSize(16);
    doc.setTextColor(211, 47, 47);
    doc.text(`Grand Total = Rs.${total}`, pageWidth - 20, y + 10, { align: "right" });

    doc.save("bill.pdf");
  });
});

  // Function to download bill table as PDF

function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const pageWidth = doc.internal.pageSize.getWidth();

  // Fetch saved values
  const savedName = localStorage.getItem("userName");
  const savedMobile = localStorage.getItem("mobileNumber");

  // Title
  doc.setFontSize(16);
  doc.text(savedName || "Customer", pageWidth / 2, 15, { align: "center" });

  // Add table
  doc.autoTable({ html: '#recordsTable', startY: 25 });

  // Calculate totals from table
  let fullCount = 0;
  let halfCount = 0;
  const tableBody = document.querySelector("#recordsTable tbody");

  Array.from(tableBody.rows).forEach(row => {
    const f = parseInt(row.cells[2].innerText) || 0;
    const h = parseInt(row.cells[3].innerText) || 0;
    fullCount += f;
    halfCount += h;
  });

  const fullSubtotal = fullCount * 800;
  const halfSubtotal = halfCount * 500;
  const total = fullSubtotal + halfSubtotal;

  // Position summary below table
  let finalY = doc.lastAutoTable.finalY + 15;

  doc.setFontSize(14);
  doc.text(`Half Day: ${halfCount} √ó 500 = Rs.${halfSubtotal}`, 20, finalY);
  finalY += 10;
  doc.text(`Full Day: ${fullCount} √ó 800 = Rs.${fullSubtotal}`, 20, finalY);
  finalY += 10;

  doc.setFontSize(16);
  doc.setTextColor(211, 47, 47);
  doc.text(`Grand Total = Rs.${total}`, pageWidth - 20, finalY + 10, { align: "right" });

  // Save merged bill
  
  fetch("https://worldtimeapi.org/api/timezone/Asia/Kolkata")
    .then(response => response.json())
    .then(data => {
      const savedName = localStorage.getItem("userName") || "default";

      // Convert API datetime string to a Date object
      const dateTime = new Date(data.datetime);

      // Format as DD-MM-YYYY
      const formattedDate = String(dateTime.getDate()).padStart(2, "0") + "-" +
                            String(dateTime.getMonth() + 1).padStart(2, "0") + "-" +
                            dateTime.getFullYear();

      // Build filename: username_DD-MM-YYYY.pdf
      const fileName = savedName + "_" + formattedDate + ".pdf";

      doc.save(fileName);
    })
    .catch(error => {
      console.error("Error fetching internet date:", error);
      // Fallback to local date if API fails
      const today = new Date();
      const fallbackDate = String(today.getDate()).padStart(2, "0") + "-" +
                           String(today.getMonth() + 1).padStart(2, "0") + "-" +
                           today.getFullYear();
      const savedName = localStorage.getItem("userName") || "default";
      doc.save(savedName + "_" + fallbackDate + ".pdf");
    });
 // kept your original filename
}



// WhatsApp ‡§µ‡§∞ ‡§™‡§æ‡§†‡§µ‡§£‡•á
// HTML ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§Ö‡§∏‡§≤‡•á‡§≤‡•á ‡§¨‡§ü‡§£: <button id="sendWhatsApp" class="btn-success">üì≤ WhatsApp ‡§µ‡§∞ ‡§™‡§æ‡§†‡§µ‡§æ</button>

const sendWhatsAppBtn = document.getElementById("sendWhatsApp");

sendWhatsAppBtn.addEventListener("click", function() {
  
  const savedName = localStorage.getItem("userName");
  const savedMobile = localStorage.getItem("mobileNumber");
  
  // ‡§π‡§æ‡§∞‡•ç‡§°‡§ï‡•ã‡§°‡•á‡§° ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§ï‡•ã‡§°‡§∏‡§π)
  const fullNumber = savedMobile;  // <-- ‡§á‡§•‡•á ‡§§‡•Å‡§Æ‡§ö‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡•ç‡§Ø‡§æ

  // ‡§®‡§æ‡§µ compulsory ‡§ï‡§∞‡§æ
  let userName = savedName;
  

  let message = `üìã ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡•ç‡§∏ (${userName}):\n`;
  let dutyCount = 0;

  Array.from(tableBody.rows).forEach(row => {
    let dutyType = "";
    if (row.cells[2].innerText) {
      dutyType = "‡§´‡•Å‡§≤ ‡§°‡•á";
      dutyCount += parseInt(row.cells[2].innerText) || 0;
    } else if (row.cells[3].innerText) {
      dutyType = "‡§π‡§æ‡§´ ‡§°‡•á";
      dutyCount += parseInt(row.cells[3].innerText) || 0;
    }
    message += `${row.cells[0].innerText}  ${row.cells[1].innerText}  ${dutyType}\n`;
  });

  // ‡§è‡§ï‡•Ç‡§£ ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä‡§ú ‡§¶‡§æ‡§ñ‡§µ‡§æ
  message += `\n‡§è‡§ï‡•Ç‡§£ ‡§°‡•ç‡§Ø‡•Å‡§ü‡•Ä‡§ú: ${dutyCount}\n`;

  // ‡§¨‡§ø‡§≤ ‡§∂‡•á‡§µ‡§ü‡•Ä ‡§ú‡•ã‡§°‡§æ
  if (billOutput.innerText.trim() !== "") {
    message += "\n" + billOutput.innerText;
  }

  const url = `https://wa.me/${fullNumber}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
});


// Name mobile numbrr
const settingsBtn = document.getElementById("settingsBtn");
const settingsPopup = document.getElementById("settingsPopup");
const saveSettingsBtn = document.getElementById("saveSettings");
const closeSettingsBtn = document.getElementById("closeSettings");
const userNameInput = document.getElementById("userNameInput");
const mobileInput = document.getElementById("mobileInput");
const headerTitle = document.getElementById("headerTitle");

// ‚öôÔ∏è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡•á‡§≤‡•ç‡§Ø‡§æ‡§µ‡§∞ popup ‡§â‡§ò‡§°‡§æ
settingsBtn.addEventListener("click", function() {
  settingsPopup.style.display = "block";
});

// Close ‡§¨‡§ü‡§£
closeSettingsBtn.addEventListener("click", function() {
  settingsPopup.style.display = "none";
});

// Save ‡§¨‡§ü‡§£
saveSettingsBtn.addEventListener("click", function() {
  const name = userNameInput.value.trim();
  const mobile = mobileInput.value.trim();

  if (!name) {
    alert("‡§®‡§æ‡§µ ‡§ü‡§æ‡§ï‡§£‡•á ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.");
    return;
  }
  if (!/^\d{10}$/.test(mobile)) {
    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡•ã‡§ó‡•ç‡§Ø 10 ‡§Ö‡§Ç‡§ï‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡•ç‡§Ø‡§æ.");
    return;
  }

  localStorage.setItem("userName", name);
  localStorage.setItem("mobileNumber", "91" + mobile);

  headerTitle.innerText = `${name}`;

  alert("‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§ú ‡§ú‡§§‡§® ‡§ù‡§æ‡§≤‡•ç‡§Ø‡§æ ‚úÖ");
  settingsPopup.style.display = "none";
});

// ‡§™‡•á‡§ú ‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•ç‡§Ø‡§æ‡§µ‡§∞ ‡§Ü‡§ß‡•Ä‡§ö‡•á values ‡§¶‡§æ‡§ñ‡§µ‡§æ
window.addEventListener("load", function() {
  const savedName = localStorage.getItem("userName");
  const savedMobile = localStorage.getItem("mobileNumber");

  if (savedName) {
    userNameInput.value = savedName;
    headerTitle.innerText = `${savedName}`;
  }
  if (savedMobile) {
    mobileInput.value = savedMobile.slice(2); // 91 ‡§ï‡§æ‡§¢‡•Ç‡§® ‡§´‡§ï‡•ç‡§§ 10 ‡§Ö‡§Ç‡§ï ‡§¶‡§æ‡§ñ‡§µ‡§æ
  }
});

saveSettingsBtn.addEventListener("click", function() {
  const name = userNameInput.value.trim();
  const mobile = mobileInput.value.trim();

  if (!name) {
    alert("‡§®‡§æ‡§µ ‡§ü‡§æ‡§ï‡§£‡•á ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.");
    return;
  }
  if (!/^\d{10}$/.test(mobile)) {
    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡•ã‡§ó‡•ç‡§Ø 10 ‡§Ö‡§Ç‡§ï‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡•ç‡§Ø‡§æ.");
    return;
  }

  localStorage.setItem("userName", name);
  localStorage.setItem("mobileNumber", "91" + mobile);

  headerTitle.innerText = ` ${name}`;

  alert("‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§ú ‡§ú‡§§‡§® ‡§ù‡§æ‡§≤‡•ç‡§Ø‡§æ ‚úÖ");

  // ‡§á‡§•‡•á overlay ‡§Ü‡§£‡§ø popup ‡§¶‡•ã‡§®‡•ç‡§π‡•Ä ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡§æ
  document.getElementById("settingsOverlay").style.display = "none";
  settingsPopup.style.display = "none";
});


settingsBtn.addEventListener("click", function() {
  document.getElementById("settingsOverlay").style.display = "block";
  document.getElementById("settingsPopup").style.display = "block";
});

closeSettings.addEventListener("click", function() {
  document.getElementById("settingsOverlay").style.display = "none";
  document.getElementById("settingsPopup").style.display = "none";
});
// Name mobile number 

function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("active");
  }
  
  
  
  
  

window.onload = loadData;
</script>


<h6 style="text-align:center; font-family:Arial, sans-serif; font-weight:bold;">
  Created by Guru Gaidhankar(9822268544)
</h6>
